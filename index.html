<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POLAR Casino | –ü–æ–ª–Ω–æ–µ –∫–∞–∑–∏–Ω–æ —Å TON</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        /* ===== –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò (–ø–æ–ª–Ω—ã–µ) ===== */
        :root {
            --ton-blue: #0088cc;
            --ton-blue-dark: #006699;
            --bg-primary: #0a0e17;
            --bg-secondary: #121828;
            --bg-tertiary: #1a2238;
            --surface-card: #212a42;
            --text-primary: #ffffff;
            --text-secondary: #8c9ab0;
            --text-tertiary: #6b7a99;
            --border-color: #2a3655;
            --success: #00c853;
            --warning: #ff9800;
            --danger: #f44336;
            --purple: #9c27b0;
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.4);
            --shadow-xl: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--bg-primary); color: var(--text-primary); }

        /* ===== –ê–ù–ò–ú–ê–¶–ò–ò ===== */
        @keyframes slotSpin {
            0% { transform: rotateX(0deg); }
            25% { transform: rotateX(180deg); }
            50% { transform: rotateX(360deg); }
            75% { transform: rotateX(540deg); }
            100% { transform: rotateX(720deg); }
        }

        @keyframes winPulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(0, 200, 83, 0.7); }
            70% { transform: scale(1.1); box-shadow: 0 0 0 20px rgba(0, 200, 83, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(0, 200, 83, 0); }
        }

        @keyframes coinRain {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        @keyframes cardDeal {
            0% { transform: translateY(-100px) rotate(-10deg); opacity: 0; }
            100% { transform: translateY(0) rotate(0); opacity: 1; }
        }

        @keyframes rouletteSpin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(3600deg); }
        }

        @keyframes diceRoll {
            0% { transform: rotateX(0) rotateY(0); }
            25% { transform: rotateX(90deg) rotateY(90deg); }
            50% { transform: rotateX(180deg) rotateY(180deg); }
            75% { transform: rotateX(270deg) rotateY(270deg); }
            100% { transform: rotateX(360deg) rotateY(360deg); }
        }

        .slot-spinning { animation: slotSpin 0.5s linear infinite; }
        .win-animation { animation: winPulse 1s ease; }
        .coin-rain { position: fixed; pointer-events: none; z-index: 10000; }
        .card-deal { animation: cardDeal 0.5s ease-out; }
        .roulette-spin { animation: rouletteSpin 3s cubic-bezier(0.1, 0, 0.2, 1); }
        .dice-rolling { animation: diceRoll 1s linear; }

        /* ===== –ò–ù–¢–ï–†–§–ï–ô–° ===== */
        .app-container {
            display: grid;
            grid-template-columns: 260px 1fr;
            min-height: 100vh;
            max-width: 1920px;
            margin: 0 auto;
        }

        /* –®–∞–ø–∫–∞ */
        .main-header {
            grid-column: 1 / -1;
            background: rgba(18, 24, 40, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
            padding: 0 30px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        /* –°–∞–π–¥–±–∞—Ä */
        .sidebar {
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 20px 0;
            position: sticky;
            top: 80px;
            height: calc(100vh - 80px);
            overflow-y: auto;
        }

        /* –ö–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            padding: 30px;
            background: linear-gradient(135deg, #0a0e17 0%, #121828 100%);
            overflow-y: auto;
            height: calc(100vh - 80px);
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ –∏–≥—Ä */
        .game-card {
            background: var(--surface-card);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
            position: relative;
        }

        .game-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--ton-blue);
            box-shadow: var(--shadow-xl);
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(10px);
        }

        .modal.active { display: flex; }

        /* –§–æ—Ä–º—ã */
        .form-group { margin-bottom: 20px; }
        .form-input {
            width: 100%;
            padding: 15px;
            background: var(--bg-tertiary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-input:focus {
            border-color: var(--ton-blue);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 136, 204, 0.3);
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            padding: 15px 30px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 16px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--ton-blue), var(--ton-blue-dark));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 136, 204, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #00a844);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #d32f2f);
            color: white;
        }

        /* –ò–≥—Ä–æ–≤—ã–µ —Å—Ç–æ–ª—ã */
        .game-table {
            background: linear-gradient(135deg, #1a2238, #212a42);
            border-radius: 20px;
            padding: 30px;
            border: 2px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .game-table::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--ton-blue), var(--purple));
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: var(--surface-card);
            border-left: 4px solid var(--ton-blue);
            padding: 20px;
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            z-index: 3000;
            max-width: 350px;
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä—ã */
        .progress-bar {
            height: 10px;
            background: var(--bg-tertiary);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--ton-blue), var(--purple));
            border-radius: 5px;
            transition: width 1s ease;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 1200px) {
            .app-container { grid-template-columns: 1fr; }
            .sidebar { display: none; }
        }

        @media (max-width: 768px) {
            .main-header { padding: 0 15px; height: 70px; }
            .main-content { padding: 15px; }
        }
    </style>
</head>
<body>
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="app-container">
        <!-- –®–∞–ø–∫–∞ -->
        <header class="main-header">
            <div class="logo">
                <span style="color: var(--ton-blue); font-size: 28px; margin-right: 10px;">üé∞</span>
                <span style="font-weight: 800; font-size: 24px;">POLAR CASINO</span>
            </div>
            
            <div style="display: flex; align-items: center; gap: 30px;">
                <div class="balance-widget" style="background: var(--surface-card); padding: 10px 20px; border-radius: 12px; display: flex; align-items: center; gap: 10px;">
                    <span style="color: var(--ton-blue); font-weight: bold;">TON</span>
                    <span id="balanceAmount" style="font-weight: 700; font-size: 18px;">0.00</span>
                </div>
                
                <button class="btn btn-primary" id="authButton">
                    <i class="fas fa-user"></i> –í–æ–π—Ç–∏
                </button>
                
                <button class="btn btn-success" id="depositButton">
                    <i class="fas fa-plus"></i> –ü–æ–ø–æ–ª–Ω–∏—Ç—å
                </button>
            </div>
        </header>

        <!-- –°–∞–π–¥–±–∞—Ä -->
        <aside class="sidebar">
            <!-- –ú–µ–Ω—é –±—É–¥–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ -->
        </aside>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main-content">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            <div id="contentArea" style="min-height: 80vh;">
                <div style="text-align: center; padding: 100px 20px;">
                    <div style="font-size: 48px; margin-bottom: 20px; color: var(--ton-blue);">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <h2>–ó–∞–≥—Ä—É–∑–∫–∞ POLAR Casino...</h2>
                </div>
            </div>
        </main>
    </div>

    <!-- ===== –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê ===== -->
    
    <!-- –ú–æ–¥–∞–ª–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–≤—Ö–æ–¥–∞ -->
    <div class="modal" id="authModal">
        <div class="modal-content" style="background: var(--bg-secondary); border-radius: 20px; padding: 40px; max-width: 500px; width: 90%;">
            <button class="modal-close" onclick="closeModal('authModal')" style="position: absolute; top: 20px; right: 20px; background: none; border: none; color: var(--text-secondary); font-size: 24px; cursor: pointer;">&times;</button>
            
            <h2 style="margin-bottom: 30px; text-align: center;" id="authTitle">–í—Ö–æ–¥ –≤ POLAR Casino</h2>
            
            <div id="authForm">
                <div class="form-group">
                    <input type="email" id="authEmail" class="form-input" placeholder="Email">
                </div>
                
                <div class="form-group">
                    <input type="password" id="authPassword" class="form-input" placeholder="–ü–∞—Ä–æ–ª—å">
                </div>
                
                <div class="form-group" id="regCodeGroup" style="display: none;">
                    <input type="text" id="regCode" class="form-input" placeholder="–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)">
                </div>
                
                <button class="btn btn-primary" style="width: 100%; padding: 18px;" id="submitAuth">
                    –í–æ–π—Ç–∏
                </button>
                
                <div style="text-align: center; margin-top: 20px;">
                    <a href="#" style="color: var(--ton-blue); text-decoration: none;" id="switchAuth">
                        –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è -->
    <div class="modal" id="depositModal">
        <div class="modal-content" style="background: var(--bg-secondary); border-radius: 20px; padding: 40px; max-width: 600px; width: 90%;">
            <button class="modal-close" onclick="closeModal('depositModal')" style="position: absolute; top: 20px; right: 20px; background: none; border: none; color: var(--text-secondary); font-size: 24px; cursor: pointer;">&times;</button>
            
            <h2 style="margin-bottom: 30px; text-align: center;">–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞</h2>
            
            <div style="margin-bottom: 30px;">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                    <button class="btn btn-secondary deposit-amount" data-amount="100">100 TON</button>
                    <button class="btn btn-secondary deposit-amount" data-amount="500">500 TON</button>
                    <button class="btn btn-secondary deposit-amount" data-amount="1000">1,000 TON</button>
                    <button class="btn btn-secondary deposit-amount" data-amount="5000">5,000 TON</button>
                </div>
                
                <div class="form-group" style="margin-top: 20px;">
                    <input type="number" id="customAmount" class="form-input" placeholder="–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ—é —Å—É–º–º—É">
                </div>
            </div>
            
            <div style="margin-bottom: 30px;">
                <h3 style="margin-bottom: 15px;">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</h3>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                    <button class="btn btn-secondary payment-method active" data-method="ton">
                        <i class="fab fa-telegram" style="color: #0088cc;"></i> TON
                    </button>
                    <button class="btn btn-secondary payment-method" data-method="card">
                        <i class="fas fa-credit-card"></i> –ö–∞—Ä—Ç–∞
                    </button>
                    <button class="btn btn-secondary payment-method" data-method="crypto">
                        <i class="fas fa-coins"></i> Crypto
                    </button>
                </div>
            </div>
            
            <div class="game-table" style="margin-bottom: 30px;">
                <h4 style="margin-bottom: 10px;">–î–µ—Ç–∞–ª–∏ –ø–ª–∞—Ç–µ–∂–∞</h4>
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span>–°—É–º–º–∞:</span>
                    <span id="depositSum">0 TON</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span>–ö–æ–º–∏—Å—Å–∏—è:</span>
                    <span id="depositFee">0 TON</span>
                </div>
                <div style="display: flex; justify-content: space-between; font-weight: bold;">
                    <span>–ò—Ç–æ–≥–æ –∫ –∑–∞—á–∏—Å–ª–µ–Ω–∏—é:</span>
                    <span id="depositTotal">0 TON</span>
                </div>
            </div>
            
            <button class="btn btn-success" style="width: 100%; padding: 18px;" id="processDeposit">
                <i class="fas fa-check"></i> –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–ª–∞—Ç–µ–∂
            </button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ –∏–≥—Ä—ã –≤ —Å–ª–æ—Ç—ã -->
    <div class="modal" id="slotModal">
        <div class="modal-content" style="background: var(--bg-secondary); border-radius: 20px; padding: 40px; max-width: 800px; width: 95%;">
            <button class="modal-close" onclick="closeSlotGame()" style="position: absolute; top: 20px; right: 20px; background: none; border: none; color: var(--text-secondary); font-size: 24px; cursor: pointer;">&times;</button>
            
            <h2 style="margin-bottom: 30px; text-align: center;" id="slotTitle">–°–ª–æ—Ç-–º–∞—à–∏–Ω–∞</h2>
            
            <div class="game-table" style="margin-bottom: 30px;">
                <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ —Å–ª–æ—Ç–æ–≤ -->
                <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; margin-bottom: 30px;" id="slotReels">
                    <!-- –°–∏–º–≤–æ–ª—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
                
                <div style="text-align: center; margin-bottom: 20px;">
                    <button class="btn btn-primary" id="spinButton" style="padding: 20px 50px; font-size: 18px;">
                        <i class="fas fa-play"></i> –ö—Ä—É—Ç–∏—Ç—å –∑–∞ <span id="currentBet">100</span> TON
                    </button>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-bottom: 20px;">
                    <button class="btn btn-secondary bet-btn" data-bet="10">10 TON</button>
                    <button class="btn btn-secondary bet-btn" data-bet="50">50 TON</button>
                    <button class="btn btn-secondary bet-btn active" data-bet="100">100 TON</button>
                    <button class="btn btn-secondary bet-btn" data-bet="500">500 TON</button>
                    <button class="btn btn-secondary bet-btn" data-bet="1000">1000 TON</button>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="game-table">
                    <h4 style="margin-bottom: 15px;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h4>
                    <div id="slotStats">
                        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
                
                <div class="game-table">
                    <h4 style="margin-bottom: 15px;">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–≥—Ä—ã</h4>
                    <div id="slotHistory" style="max-height: 200px; overflow-y: auto;">
                        <!-- –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ —Ä—É–ª–µ—Ç–∫–∏ -->
    <div class="modal" id="rouletteModal">
        <div class="modal-content" style="background: var(--bg-secondary); border-radius: 20px; padding: 40px; max-width: 1000px; width: 95%;">
            <button class="modal-close" onclick="closeRoulette()" style="position: absolute; top: 20px; right: 20px; background: none; border: none; color: var(--text-secondary); font-size: 24px; cursor: pointer;">&times;</button>
            
            <h2 style="margin-bottom: 30px; text-align: center;">–†—É–ª–µ—Ç–∫–∞</h2>
            
            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 30px;">
                <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ —Ä—É–ª–µ—Ç–∫–∏ -->
                <div class="game-table">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <div id="rouletteWheel" style="width: 300px; height: 300px; margin: 0 auto; position: relative; background: #1a2238; border-radius: 50%; border: 5px solid #2a3655;">
                            <!-- –†—É–ª–µ—Ç–∫–∞ —Ä–∏—Å—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                        </div>
                    </div>
                    
                    <div style="text-align: center;">
                        <button class="btn btn-primary" id="spinRoulette" style="padding: 20px 50px; font-size: 18px;">
                            <i class="fas fa-play"></i> –ö—Ä—É—Ç–∏—Ç—å —Ä—É–ª–µ—Ç–∫—É
                        </button>
                    </div>
                </div>
                
                <!-- –°—Ç–∞–≤–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
                <div>
                    <div class="game-table" style="margin-bottom: 20px;">
                        <h4 style="margin-bottom: 15px;">–í–∞—à–∏ —Å—Ç–∞–≤–∫–∏</h4>
                        <div id="currentBets">
                            <!-- –¢–µ–∫—É—â–∏–µ —Å—Ç–∞–≤–∫–∏ -->
                        </div>
                    </div>
                    
                    <div class="game-table">
                        <h4 style="margin-bottom: 15px;">–ë—ã—Å—Ç—Ä—ã–µ —Å—Ç–∞–≤–∫–∏</h4>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                            <button class="btn btn-secondary" onclick="placeRouletteBet('red', 100)">–ö—Ä–∞—Å–Ω–æ–µ 100</button>
                            <button class="btn btn-secondary" onclick="placeRouletteBet('black', 100)">–ß–µ—Ä–Ω–æ–µ 100</button>
                            <button class="btn btn-secondary" onclick="placeRouletteBet('even', 100)">–ß–µ—Ç–Ω–æ–µ 100</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π -->
    <div class="modal" id="transactionsModal">
        <div class="modal-content" style="background: var(--bg-secondary); border-radius: 20px; padding: 40px; max-width: 800px; width: 95%;">
            <button class="modal-close" onclick="closeModal('transactionsModal')" style="position: absolute; top: 20px; right: 20px; background: none; border: none; color: var(--text-secondary); font-size: 24px; cursor: pointer;">&times;</button>
            
            <h2 style="margin-bottom: 30px; text-align: center;">–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h2>
            
            <div style="margin-bottom: 20px;">
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-secondary filter-transaction active" data-filter="all">–í—Å–µ</button>
                    <button class="btn btn-secondary filter-transaction" data-filter="deposit">–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è</button>
                    <button class="btn btn-secondary filter-transaction" data-filter="withdraw">–í—ã–≤–æ–¥—ã</button>
                    <button class="btn btn-secondary filter-transaction" data-filter="win">–í—ã–∏–≥—Ä—ã—à–∏</button>
                    <button class="btn btn-secondary filter-transaction" data-filter="bet">–°—Ç–∞–≤–∫–∏</button>
                </div>
            </div>
            
            <div class="game-table">
                <div style="max-height: 400px; overflow-y: auto;">
                    <table style="width: 100%; border-collapse: collapse;" id="transactionsTable">
                        <thead>
                            <tr style="border-bottom: 1px solid var(--border-color);">
                                <th style="padding: 15px; text-align: left;">–î–∞—Ç–∞</th>
                                <th style="padding: 15px; text-align: left;">–¢–∏–ø</th>
                                <th style="padding: 15px; text-align: left;">–°—É–º–º–∞</th>
                                <th style="padding: 15px; text-align: left;">–°—Ç–∞—Ç—É—Å</th>
                                <th style="padding: 15px; text-align: left;">–•—ç—à</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsBody">
                            <!-- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π -->
    <div id="animationContainer" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999;"></div>

    <!-- ===== –°–ò–°–¢–ï–ú–ù–´–ï –°–ö–†–ò–ü–¢–´ ===== -->
    <script>
        // ===== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –°–ò–°–¢–ï–ú–´ =====
        const POLAR_SYSTEM = {
            // –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            user: {
                isAuthenticated: false,
                id: null,
                email: '',
                balance: 0,
                createdAt: null,
                level: 1,
                experience: 0,
                refCode: null,
                totalWagered: 0,
                totalWon: 0
            },
            
            // –ò–≥—Ä—ã
            games: {
                slots: {
                    symbols: ['üçí', 'üçã', 'üçä', 'üçá', 'üîî', '‚≠ê', '7Ô∏è‚É£', 'üíé', 'üéØ', 'üëë'],
                    paytable: {
                        'üçíüçíüçí': 5,
                        'üîîüîîüîî': 10,
                        '‚≠ê‚≠ê‚≠ê': 15,
                        '7Ô∏è‚É£7Ô∏è‚É£7Ô∏è‚É£': 50,
                        'üíéüíéüíé': 100
                    },
                    currentBet: 100
                },
                roulette: {
                    numbers: Array.from({length: 37}, (_, i) => i),
                    currentBets: [],
                    history: []
                },
                blackjack: {
                    deck: [],
                    playerHand: [],
                    dealerHand: [],
                    status: 'waiting'
                }
            },
            
            // –§–∏–Ω–∞–Ω—Å—ã
            transactions: [],
            depositMethods: [
                { id: 'ton', name: 'TON Wallet', fee: 0, min: 10, max: 100000 },
                { id: 'card', name: '–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞', fee: 2.5, min: 100, max: 50000 },
                { id: 'crypto', name: '–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞', fee: 0.5, min: 10, max: 1000000 }
            ],
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
            settings: {
                sound: true,
                animations: true,
                notifications: true,
                theme: 'dark'
            }
        };

        // ===== –°–ò–°–¢–ï–ú–ê –ê–£–¢–ï–ù–¢–ò–ö–ê–¶–ò–ò =====
        class AuthSystem {
            constructor() {
                this.initAuth();
            }
            
            initAuth() {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Å–µ—Å—Å–∏—é
                const savedUser = localStorage.getItem('polar_user');
                if (savedUser) {
                    POLAR_SYSTEM.user = JSON.parse(savedUser);
                    this.updateUI();
                }
            }
            
            async register(email, password, refCode = null) {
                try {
                    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    const userId = 'user_' + Date.now() + Math.random().toString(36).substr(2, 9);
                    const userRefCode = 'POLAR' + Math.random().toString(36).substr(2, 6).toUpperCase();
                    
                    // –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    POLAR_SYSTEM.user = {
                        isAuthenticated: true,
                        id: userId,
                        email: email,
                        balance: 100, // –°—Ç–∞—Ä—Ç–æ–≤—ã–π –±–æ–Ω—É—Å
                        createdAt: new Date().toISOString(),
                        level: 1,
                        experience: 0,
                        refCode: userRefCode,
                        totalWagered: 0,
                        totalWon: 0
                    };
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
                    localStorage.setItem('polar_user', JSON.stringify(POLAR_SYSTEM.user));
                    
                    // –°–æ–∑–¥–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
                    this.addTransaction('bonus', 100, '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –±–æ–Ω—É—Å');
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º UI
                    this.updateUI();
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                    showNotification('üéâ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –ü–æ–ª—É—á–µ–Ω–æ 100 TON –±–æ–Ω—É—Å–∞', 'success');
                    
                    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É
                    closeModal('authModal');
                    
                    return true;
                } catch (error) {
                    console.error('Registration error:', error);
                    showNotification('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏', 'error');
                    return false;
                }
            }
            
            async login(email, password) {
                try {
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
                    // –î–ª—è –¥–µ–º–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º localStorage
                    const users = JSON.parse(localStorage.getItem('polar_users') || '{}');
                    
                    if (users[email] && users[email].password === password) {
                        POLAR_SYSTEM.user = users[email];
                        POLAR_SYSTEM.user.isAuthenticated = true;
                        
                        localStorage.setItem('polar_user', JSON.stringify(POLAR_SYSTEM.user));
                        this.updateUI();
                        
                        showNotification('‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω', 'success');
                        closeModal('authModal');
                        return true;
                    } else {
                        showNotification('–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å', 'error');
                        return false;
                    }
                } catch (error) {
                    console.error('Login error:', error);
                    showNotification('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞', 'error');
                    return false;
                }
            }
            
            logout() {
                POLAR_SYSTEM.user.isAuthenticated = false;
                localStorage.removeItem('polar_user');
                this.updateUI();
                showNotification('–í—ã –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã', 'info');
            }
            
            updateUI() {
                const authBtn = document.getElementById('authButton');
                const balanceEl = document.getElementById('balanceAmount');
                
                if (POLAR_SYSTEM.user.isAuthenticated) {
                    authBtn.innerHTML = '<i class="fas fa-user"></i> ' + POLAR_SYSTEM.user.email.split('@')[0];
                    authBtn.onclick = () => this.showProfile();
                    
                    balanceEl.textContent = POLAR_SYSTEM.user.balance.toFixed(2);
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                    loadMainInterface();
                } else {
                    authBtn.innerHTML = '<i class="fas fa-user"></i> –í–æ–π—Ç–∏';
                    authBtn.onclick = () => openModal('authModal');
                    
                    balanceEl.textContent = '0.00';
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω
                    showWelcomeScreen();
                }
            }
            
            showProfile() {
                // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ—Ñ–∏–ª—è
                loadProfilePage();
            }
        }

        // ===== –ü–õ–ê–¢–ï–ñ–ù–ê–Ø –°–ò–°–¢–ï–ú–ê =====
        class PaymentSystem {
            constructor() {
                this.currentDeposit = {
                    amount: 0,
                    method: 'ton',
                    fee: 0,
                    total: 0
                };
            }
            
            async processDeposit(amount, method) {
                try {
                    if (!POLAR_SYSTEM.user.isAuthenticated) {
                        showNotification('–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É', 'error');
                        return false;
                    }
                    
                    if (amount < 10) {
                        showNotification('–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è: 10 TON', 'error');
                        return false;
                    }
                    
                    // –†–∞—Å—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏
                    const methodData = POLAR_SYSTEM.depositMethods.find(m => m.id === method);
                    const fee = (amount * methodData.fee) / 100;
                    const total = amount;
                    
                    // –°–∏–º—É–ª—è—Ü–∏—è –ø–ª–∞—Ç–µ–∂–∞
                    showNotification('üîó –û–∂–∏–¥–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞...', 'info');
                    
                    await this.simulatePayment(amount, method);
                    
                    // –ó–∞—á–∏—Å–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤
                    POLAR_SYSTEM.user.balance += total;
                    this.updateBalance();
                    
                    // –ó–∞–ø–∏—Å—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
                    this.addTransaction('deposit', total, `–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ ${methodData.name}`, method);
                    
                    // –ê–Ω–∏–º–∞—Ü–∏—è
                    this.createCoinAnimation(50);
                    
                    showNotification(`‚úÖ –ë–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–µ–Ω –Ω–∞ ${total.toFixed(2)} TON`, 'success');
                    
                    closeModal('depositModal');
                    return true;
                    
                } catch (error) {
                    console.error('Deposit error:', error);
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏', 'error');
                    return false;
                }
            }
            
            async simulatePayment(amount, method) {
                // –°–∏–º—É–ª—è—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–∞
                return new Promise(resolve => {
                    setTimeout(() => {
                        // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
                        resolve({
                            success: true,
                            transactionId: 'tx_' + Date.now() + Math.random().toString(36).substr(2, 9),
                            amount: amount,
                            method: method
                        });
                    }, 2000);
                });
            }
            
            async withdraw(amount, address) {
                try {
                    if (!POLAR_SYSTEM.user.isAuthenticated) {
                        showNotification('–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É', 'error');
                        return false;
                    }
                    
                    if (amount > POLAR_SYSTEM.user.balance) {
                        showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤', 'error');
                        return false;
                    }
                    
                    if (amount < 50) {
                        showNotification('–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –≤—ã–≤–æ–¥–∞: 50 TON', 'error');
                        return false;
                    }
                    
                    // –ö–æ–º–∏—Å—Å–∏—è –Ω–∞ –≤—ã–≤–æ–¥
                    const fee = Math.max(amount * 0.01, 1);
                    const total = amount - fee;
                    
                    // –°–∏–º—É–ª—è—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–≤–æ–¥–∞
                    showNotification('‚è≥ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–≤–æ–¥–∞...', 'info');
                    
                    await new Promise(resolve => setTimeout(resolve, 3000));
                    
                    // –°–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤
                    POLAR_SYSTEM.user.balance -= amount;
                    this.updateBalance();
                    
                    // –ó–∞–ø–∏—Å—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
                    this.addTransaction('withdraw', -amount, `–í—ã–≤–æ–¥ –Ω–∞ ${address.substring(0, 10)}...`, 'ton');
                    
                    showNotification(`‚úÖ –í—ã–≤–æ–¥ ${total.toFixed(2)} TON –Ω–∞ –∫–æ—à–µ–ª–µ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω`, 'success');
                    
                    return true;
                    
                } catch (error) {
                    console.error('Withdraw error:', error);
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–≤–æ–¥–µ', 'error');
                    return false;
                }
            }
            
            addTransaction(type, amount, description, method = null) {
                const transaction = {
                    id: 'tx_' + Date.now(),
                    type: type,
                    amount: amount,
                    description: description,
                    method: method,
                    status: 'completed',
                    timestamp: new Date().toISOString(),
                    hash: '0x' + Math.random().toString(36).substr(2, 64)
                };
                
                POLAR_SYSTEM.transactions.unshift(transaction);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
                localStorage.setItem('polar_transactions', JSON.stringify(POLAR_SYSTEM.transactions));
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É –µ—Å–ª–∏ –æ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∞
                if (document.getElementById('transactionsModal').classList.contains('active')) {
                    loadTransactions();
                }
            }
            
            updateBalance() {
                const balanceEl = document.getElementById('balanceAmount');
                balanceEl.textContent = POLAR_SYSTEM.user.balance.toFixed(2);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                localStorage.setItem('polar_user', JSON.stringify(POLAR_SYSTEM.user));
            }
            
            createCoinAnimation(count) {
                if (!POLAR_SYSTEM.settings.animations) return;
                
                const container = document.getElementById('animationContainer');
                
                for (let i = 0; i < count; i++) {
                    const coin = document.createElement('div');
                    coin.innerHTML = 'üí∞';
                    coin.style.position = 'absolute';
                    coin.style.left = Math.random() * 100 + 'vw';
                    coin.style.fontSize = (20 + Math.random() * 20) + 'px';
                    coin.style.opacity = '0.8';
                    coin.style.animation = `coinRain ${1 + Math.random() * 2}s linear forwards`;
                    
                    container.appendChild(coin);
                    
                    setTimeout(() => coin.remove(), 3000);
                }
            }
        }

        // ===== –ò–ì–†–û–í–ê–Ø –°–ò–°–¢–ï–ú–ê =====
        class GameSystem {
            constructor() {
                this.slotReels = [];
                this.rouletteNumber = null;
                this.blackjackDeck = [];
            }
            
            // –°–ª–æ—Ç—ã
            initSlotGame() {
                const reelsContainer = document.getElementById('slotReels');
                reelsContainer.innerHTML = '';
                
                // –°–æ–∑–¥–∞–µ–º 5 –±–∞—Ä–∞–±–∞–Ω–æ–≤ –ø–æ 3 —Å–∏–º–≤–æ–ª–∞
                for (let i = 0; i < 5; i++) {
                    const reel = document.createElement('div');
                    reel.className = 'slot-reel';
                    reel.style.display = 'flex';
                    reel.style.flexDirection = 'column';
                    reel.style.gap = '10px';
                    
                    for (let j = 0; j < 3; j++) {
                        const symbol = document.createElement('div');
                        symbol.className = 'slot-symbol';
                        symbol.style.background = 'var(--surface-card)';
                        symbol.style.borderRadius = '10px';
                        symbol.style.padding = '20px';
                        symbol.style.textAlign = 'center';
                        symbol.style.fontSize = '40px';
                        symbol.innerHTML = '?';
                        
                        reel.appendChild(symbol);
                    }
                    
                    reelsContainer.appendChild(reel);
                }
                
                this.updateSlotStats();
            }
            
            spinSlots() {
                if (POLAR_SYSTEM.user.balance < POLAR_SYSTEM.games.slots.currentBet) {
                    showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤', 'error');
                    return;
                }
                
                // –°–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–∞–≤–∫–∏
                POLAR_SYSTEM.user.balance -= POLAR_SYSTEM.games.slots.currentBet;
                POLAR_SYSTEM.user.totalWagered += POLAR_SYSTEM.games.slots.currentBet;
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è
                const spinBtn = document.getElementById('spinButton');
                spinBtn.disabled = true;
                spinBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –í—Ä–∞—â–µ–Ω–∏–µ...';
                
                // –í—Ä–∞—â–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –±–∞—Ä–∞–±–∞–Ω–∞
                const reels = document.querySelectorAll('.slot-reel');
                reels.forEach((reel, index) => {
                    const symbols = reel.querySelectorAll('.slot-symbol');
                    
                    symbols.forEach(symbol => {
                        symbol.style.animation = 'slotSpin 0.1s linear 5';
                    });
                    
                    setTimeout(() => {
                        symbols.forEach(symbol => {
                            symbol.style.animation = '';
                            const randomSymbol = POLAR_SYSTEM.games.slots.symbols[
                                Math.floor(Math.random() * POLAR_SYSTEM.games.slots.symbols.length)
                            ];
                            symbol.innerHTML = randomSymbol;
                            symbol.classList.add('win-animation');
                            
                            setTimeout(() => symbol.classList.remove('win-animation'), 1000);
                        });
                    }, 500 + index * 100);
                });
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∏–≥—Ä—ã—à–∞
                setTimeout(() => {
                    this.checkSlotWin();
                    spinBtn.disabled = false;
                    spinBtn.innerHTML = '<i class="fas fa-play"></i> –ö—Ä—É—Ç–∏—Ç—å –∑–∞ <span id="currentBet">' + 
                                       POLAR_SYSTEM.games.slots.currentBet + '</span> TON';
                }, 1500);
            }
            
            checkSlotWin() {
                const reels = document.querySelectorAll('.slot-reel');
                const symbols = [];
                
                reels.forEach(reel => {
                    const reelSymbols = Array.from(reel.querySelectorAll('.slot-symbol'))
                        .map(s => s.textContent);
                    symbols.push(reelSymbols[1]); // –°—Ä–µ–¥–Ω–∏–π —Ä—è–¥
                });
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
                let winAmount = 0;
                const symbolCount = {};
                
                symbols.forEach(symbol => {
                    symbolCount[symbol] = (symbolCount[symbol] || 0) + 1;
                });
                
                // –í—ã–∏–≥—Ä—ã—à –∑–∞ 3+ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–∞
                Object.keys(symbolCount).forEach(symbol => {
                    if (symbolCount[symbol] >= 3) {
                        const multiplier = POLAR_SYSTEM.games.slots.paytable[symbol.repeat(3)] || 5;
                        winAmount = POLAR_SYSTEM.games.slots.currentBet * multiplier * symbolCount[symbol];
                    }
                });
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
                const line = symbols.join('');
                if (POLAR_SYSTEM.games.slots.paytable[line]) {
                    winAmount = POLAR_SYSTEM.games.slots.currentBet * POLAR_SYSTEM.games.slots.paytable[line];
                }
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–∏–≥—Ä—ã—à–∞
                if (winAmount > 0) {
                    POLAR_SYSTEM.user.balance += winAmount;
                    POLAR_SYSTEM.user.totalWon += winAmount;
                    
                    // –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–∏–≥—Ä—ã—à–∞
                    this.createWinAnimation(winAmount);
                    
                    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
                    this.addToSlotHistory(true, winAmount);
                    
                    showNotification(`üéâ –í—ã–∏–≥—Ä—ã—à! +${winAmount.toFixed(2)} TON`, 'success');
                } else {
                    this.addToSlotHistory(false, 0);
                    showNotification('–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!', 'info');
                }
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
                document.getElementById('balanceAmount').textContent = POLAR_SYSTEM.user.balance.toFixed(2);
                this.updateSlotStats();
                localStorage.setItem('polar_user', JSON.stringify(POLAR_SYSTEM.user));
            }
            
            addToSlotHistory(isWin, amount) {
                const historyEl = document.getElementById('slotHistory');
                const historyItem = document.createElement('div');
                historyItem.style.padding = '10px';
                historyItem.style.borderBottom = '1px solid var(--border-color)';
                historyItem.style.display = 'flex';
                historyItem.style.justifyContent = 'space-between';
                
                historyItem.innerHTML = `
                    <span>${new Date().toLocaleTimeString()}</span>
                    <span style="color: ${isWin ? 'var(--success)' : 'var(--danger)'};">
                        ${isWin ? '+' : '-'}${isWin ? amount.toFixed(2) : POLAR_SYSTEM.games.slots.currentBet} TON
                    </span>
                `;
                
                historyEl.prepend(historyItem);
                
                if (historyEl.children.length > 10) {
                    historyEl.removeChild(historyEl.lastChild);
                }
            }
            
            updateSlotStats() {
                const statsEl = document.getElementById('slotStats');
                statsEl.innerHTML = `
                    <div style="margin-bottom: 10px;">–ë–∞–ª–∞–Ω—Å: <strong>${POLAR_SYSTEM.user.balance.toFixed(2)} TON</strong></div>
                    <div style="margin-bottom: 10px;">–°—Ç–∞–≤–∫–∞: <strong>${POLAR_SYSTEM.games.slots.currentBet} TON</strong></div>
                    <div style="margin-bottom: 10px;">–í—Å–µ–≥–æ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ: <strong>${POLAR_SYSTEM.user.totalWagered.toFixed(2)} TON</strong></div>
                    <div>–í—Å–µ–≥–æ –≤—ã–∏–≥—Ä–∞–Ω–æ: <strong style="color: var(--success);">${POLAR_SYSTEM.user.totalWon.toFixed(2)} TON</strong></div>
                `;
            }
            
            createWinAnimation(amount) {
                if (!POLAR_SYSTEM.settings.animations) return;
                
                const container = document.getElementById('animationContainer');
                const winText = document.createElement('div');
                
                winText.innerHTML = `+${amount.toFixed(2)} TON`;
                winText.style.position = 'fixed';
                winText.style.top = '50%';
                winText.style.left = '50%';
                winText.style.transform = 'translate(-50%, -50%)';
                winText.style.fontSize = '60px';
                winText.style.fontWeight = 'bold';
                winText.style.color = '#00ff00';
                winText.style.textShadow = '0 0 20px #00ff00';
                winText.style.zIndex = '10000';
                winText.style.animation = 'winPulse 1s ease 3';
                
                container.appendChild(winText);
                
                setTimeout(() => winText.remove(), 3000);
            }
            
            // –†—É–ª–µ—Ç–∫–∞
            initRoulette() {
                const wheel = document.getElementById('rouletteWheel');
                wheel.innerHTML = '';
                
                // –°–æ–∑–¥–∞–µ–º –∫–æ–ª–µ—Å–æ —Ä—É–ª–µ—Ç–∫–∏
                const numbers = POLAR_SYSTEM.games.roulette.numbers;
                const angle = 360 / numbers.length;
                
                numbers.forEach((num, index) => {
                    const segment = document.createElement('div');
                    segment.style.position = 'absolute';
                    segment.style.width = '100%';
                    segment.style.height = '100%';
                    segment.style.transformOrigin = 'center';
                    segment.style.transform = `rotate(${index * angle}deg)`;
                    
                    const color = (num === 0) ? '#008000' : 
                                 (num % 2 === 0) ? '#000000' : '#ff0000';
                    
                    segment.innerHTML = `
                        <div style="position: absolute; top: 0; left: 50%; transform: translateX(-50%); 
                                    width: 50%; height: 50%; background: ${color}; 
                                    clip-path: polygon(50% 0%, 100% 100%, 0% 100%);">
                            <div style="position: absolute; top: 30%; left: 50%; transform: translate(-50%, -50%); 
                                        color: white; font-weight: bold; font-size: 14px;">
                                ${num}
                            </div>
                        </div>
                    `;
                    
                    wheel.appendChild(segment);
                });
            }
            
            spinRoulette() {
                // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è —Ä—É–ª–µ—Ç–∫–∏
                const wheel = document.getElementById('rouletteWheel');
                wheel.classList.add('roulette-spin');
                
                // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–∏—Å–ª–∞
                setTimeout(() => {
                    const winningNumber = Math.floor(Math.random() * 37);
                    wheel.classList.remove('roulette-spin');
                    
                    this.processRouletteResult(winningNumber);
                }, 3000);
            }
            
            processRouletteResult(number) {
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞–≤–æ–∫ –∏ –≤—ã–ø–ª–∞—Ç–∞ –≤—ã–∏–≥—Ä—ã—à–µ–π
                // –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –≤—ã–∏–≥—Ä—ã—à–µ–π –ø–æ —Å—Ç–∞–≤–∫–∞–º
                showNotification(`üé° –í—ã–ø–∞–ª–æ —á–∏—Å–ª–æ: ${number}`, 'info');
            }
            
            // –ë–ª—ç–∫–¥–∂–µ–∫
            initBlackjack() {
                // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–æ–¥—ã
                this.blackjackDeck = this.createDeck();
                this.shuffleDeck();
                
                // –†–∞–∑–¥–∞—á–∞ –∫–∞—Ä—Ç
                POLAR_SYSTEM.games.blackjack.playerHand = [this.drawCard(), this.drawCard()];
                POLAR_SYSTEM.games.blackjack.dealerHand = [this.drawCard(), this.drawCard()];
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
                this.updateBlackjackUI();
            }
            
            createDeck() {
                const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
                const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
                const deck = [];
                
                suits.forEach(suit => {
                    values.forEach(value => {
                        deck.push({ suit, value });
                    });
                });
                
                return deck;
            }
            
            shuffleDeck() {
                for (let i = this.blackjackDeck.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [this.blackjackDeck[i], this.blackjackDeck[j]] = [this.blackjackDeck[j], this.blackjackDeck[i]];
                }
            }
            
            drawCard() {
                return this.blackjackDeck.pop();
            }
            
            updateBlackjackUI() {
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –±–ª—ç–∫–¥–∂–µ–∫–∞
                // –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–π
            }
        }

        // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–ò–°–¢–ï–ú =====
        const authSystem = new AuthSystem();
        const paymentSystem = new PaymentSystem();
        const gameSystem = new GameSystem();

        // ===== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò =====
        function showNotification(message, type = 'info') {
            if (!POLAR_SYSTEM.settings.notifications) return;
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.style.background = type === 'success' ? 'var(--success)' : 
                                           type === 'error' ? 'var(--danger)' : 
                                           type === 'warning' ? 'var(--warning)' : 'var(--surface-card)';
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : 
                                     type === 'error' ? 'exclamation-circle' : 
                                     type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                    <div>${message}</div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 5000);
        }

        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function openSlotGame() {
            openModal('slotModal');
            gameSystem.initSlotGame();
        }

        function closeSlotGame() {
            closeModal('slotModal');
        }

        function openRoulette() {
            openModal('rouletteModal');
            gameSystem.initRoulette();
        }

        function closeRoulette() {
            closeModal('rouletteModal');
        }

        function loadMainInterface() {
            const contentArea = document.getElementById('contentArea');
            contentArea.innerHTML = `
                <div class="animate__animated animate__fadeIn">
                    <div style="background: linear-gradient(135deg, var(--ton-blue), var(--purple)); 
                                border-radius: 20px; padding: 40px; margin-bottom: 30px;">
                        <h1 style="font-size: 48px; margin-bottom: 10px;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ POLAR Casino!</h1>
                        <p style="font-size: 18px; opacity: 0.9;">–í–∞—à –±–∞–ª–∞–Ω—Å: <strong>${POLAR_SYSTEM.user.balance.toFixed(2)} TON</strong></p>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 40px;">
                        <div class="game-card" onclick="openSlotGame()" style="cursor: pointer;">
                            <div style="padding: 30px; text-align: center;">
                                <div style="font-size: 60px; margin-bottom: 20px;">üé∞</div>
                                <h3 style="margin-bottom: 10px;">–°–ª–æ—Ç—ã</h3>
                                <p style="color: var(--text-secondary);">–ë–æ–ª–µ–µ 100 —Å–ª–æ—Ç–æ–≤ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º–∏ –¥–∂–µ–∫–ø–æ—Ç–∞–º–∏</p>
                            </div>
                        </div>
                        
                        <div class="game-card" onclick="openRoulette()" style="cursor: pointer;">
                            <div style="padding: 30px; text-align: center;">
                                <div style="font-size: 60px; margin-bottom: 20px;">üé°</div>
                                <h3 style="margin-bottom: 10px;">–†—É–ª–µ—Ç–∫–∞</h3>
                                <p style="color: var(--text-secondary);">–ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—è, –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∞—è –∏ –∂–∏–≤–∞—è —Ä—É–ª–µ—Ç–∫–∞</p>
                            </div>
                        </div>
                        
                        <div class="game-card" onclick="showNotification('–°–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ!', 'info')" style="cursor: pointer;">
                            <div style="padding: 30px; text-align: center;">
                                <div style="font-size: 60px; margin-bottom: 20px;">üÉè</div>
                                <h3 style="margin-bottom: 10px;">–ë–ª—ç–∫–¥–∂–µ–∫</h3>
                                <p style="color: var(--text-secondary);">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –±–ª—ç–∫–¥–∂–µ–∫ —Å –∂–∏–≤—ã–º–∏ –¥–∏–ª–µ—Ä–∞–º–∏</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="game-table">
                        <h2 style="margin-bottom: 20px;">–ê–∫—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–Ω–∏—Ä—ã</h2>
                        <div style="display: grid; gap: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; 
                                        padding: 15px; background: var(--bg-tertiary); border-radius: 10px;">
                                <div>
                                    <h4 style="margin-bottom: 5px;">TON Million Race</h4>
                                    <p style="color: var(--text-secondary); font-size: 14px;">–ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥: 1,000,000 TON</p>
                                </div>
                                <button class="btn btn-primary">–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∞–π–¥–±–∞—Ä
            loadSidebar();
        }

        function showWelcomeScreen() {
            const contentArea = document.getElementById('contentArea');
            contentArea.innerHTML = `
                <div style="text-align: center; padding: 100px 20px;">
                    <div style="font-size: 80px; color: var(--ton-blue); margin-bottom: 30px;">
                        üé∞
                    </div>
                    <h1 style="font-size: 48px; margin-bottom: 20px;">POLAR Casino</h1>
                    <p style="font-size: 20px; color: var(--text-secondary); margin-bottom: 40px; max-width: 600px; margin-left: auto; margin-right: auto;">
                        –ö—Ä—É–ø–Ω–µ–π—à–µ–µ TON –∫–∞–∑–∏–Ω–æ —Å –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–º–∏ –≤—ã–ø–ª–∞—Ç–∞–º–∏, –∂–∏–≤—ã–º–∏ –¥–∏–ª–µ—Ä–∞–º–∏ –∏ —Ç—É—Ä–Ω–∏—Ä–∞–º–∏
                    </p>
                    
                    <div style="display: flex; gap: 20px; justify-content: center; margin-bottom: 50px;">
                        <button class="btn btn-primary" onclick="openModal('authModal')" style="padding: 20px 40px; font-size: 18px;">
                            <i class="fas fa-play"></i> –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                        </button>
                        <button class="btn btn-secondary" onclick="showNotification('–î–µ–º–æ —Ä–µ–∂–∏–º —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω', 'info')" style="padding: 20px 40px; font-size: 18px;">
                            <i class="fas fa-eye"></i> –î–µ–º–æ —Ä–µ–∂–∏–º
                        </button>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; max-width: 900px; margin: 0 auto;">
                        <div>
                            <div style="font-size: 40px; margin-bottom: 15px;">‚ö°</div>
                            <h3 style="margin-bottom: 10px;">–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –≤—ã–ø–ª–∞—Ç—ã</h3>
                            <p style="color: var(--text-secondary);">–í—ã–≤–æ–¥ –≤ TON –∑–∞ —Å–µ–∫—É–Ω–¥—ã</p>
                        </div>
                        <div>
                            <div style="font-size: 40px; margin-bottom: 15px;">üîí</div>
                            <h3 style="margin-bottom: 10px;">100% –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h3>
                            <p style="color: var(--text-secondary);">–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã</p>
                        </div>
                        <div>
                            <div style="font-size: 40px; margin-bottom: 15px;">üéÅ</div>
                            <h3 style="margin-bottom: 10px;">–©–µ–¥—Ä—ã–µ –±–æ–Ω—É—Å—ã</h3>
                            <p style="color: var(--text-secondary);">–î–æ 1000 TON –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function loadSidebar() {
            const sidebar = document.querySelector('.sidebar');
            sidebar.innerHTML = `
                <div style="padding: 20px;">
                    <div style="margin-bottom: 30px;">
                        <h3 style="margin-bottom: 15px; color: var(--text-secondary); font-size: 14px; text-transform: uppercase;">–ú–ï–ù–Æ</h3>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <button class="btn btn-secondary" onclick="loadMainInterface()" style="justify-content: flex-start;">
                                <i class="fas fa-home"></i> –ì–ª–∞–≤–Ω–∞—è
                            </button>
                            <button class="btn btn-secondary" onclick="openSlotGame()" style="justify-content: flex-start;">
                                <i class="fas fa-dice"></i> –°–ª–æ—Ç—ã
                            </button>
                            <button class="btn btn-secondary" onclick="openRoulette()" style="justify-content: flex-start;">
                                <i class="fas fa-circle"></i> –†—É–ª–µ—Ç–∫–∞
                            </button>
                            <button class="btn btn-secondary" onclick="showNotification('–°–∫–æ—Ä–æ!', 'info')" style="justify-content: flex-start;">
                                <i class="fas fa-club"></i> –ë–ª—ç–∫–¥–∂–µ–∫
                            </button>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 30px;">
                        <h3 style="margin-bottom: 15px; color: var(--text-secondary); font-size: 14px; text-transform: uppercase;">–§–ò–ù–ê–ù–°–´</h3>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <button class="btn btn-secondary" onclick="openModal('depositModal')" style="justify-content: flex-start;">
                                <i class="fas fa-plus"></i> –ü–æ–ø–æ–ª–Ω–∏—Ç—å
                            </button>
                            <button class="btn btn-secondary" onclick="showNotification('–§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ', 'info')" style="justify-content: flex-start;">
                                <i class="fas fa-minus"></i> –í—ã–≤–µ—Å—Ç–∏
                            </button>
                            <button class="btn btn-secondary" onclick="openModal('transactionsModal')" style="justify-content: flex-start;">
                                <i class="fas fa-history"></i> –ò—Å—Ç–æ—Ä–∏—è
                            </button>
                        </div>
                    </div>
                    
                    <div>
                        <h3 style="margin-bottom: 15px; color: var(--text-secondary); font-size: 14px; text-transform: uppercase;">–ü–†–û–§–ò–õ–¨</h3>
                        <div class="game-table" style="padding: 15px;">
                            <div style="text-align: center; margin-bottom: 15px;">
                                <div style="font-size: 40px; margin-bottom: 10px;">üë§</div>
                                <div style="font-weight: bold;">${POLAR_SYSTEM.user.email.split('@')[0]}</div>
                            </div>
                            
                            <div style="margin-bottom: 10px;">
                                <div style="display: flex; justify-content: space-between;">
                                    <span>–£—Ä–æ–≤–µ–Ω—å:</span>
                                    <span>${POLAR_SYSTEM.user.level}</span>
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 15px;">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${(POLAR_SYSTEM.user.experience % 100)}%;"></div>
                                </div>
                                <div style="text-align: center; font-size: 12px; margin-top: 5px;">
                                    –û–ø—ã—Ç: ${POLAR_SYSTEM.user.experience}/100
                                </div>
                            </div>
                            
                            <button class="btn btn-danger" onclick="authSystem.logout()" style="width: 100%;">
                                <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function loadProfilePage() {
            const contentArea = document.getElementById('contentArea');
            contentArea.innerHTML = `
                <div class="animate__animated animate__fadeIn">
                    <h1 style="margin-bottom: 30px;">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h1>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 40px;">
                        <div class="game-table">
                            <h3 style="margin-bottom: 20px;">–û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                            <div style="display: grid; gap: 15px;">
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Email:</span>
                                    <span>${POLAR_SYSTEM.user.email}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</span>
                                    <span>${new Date(POLAR_SYSTEM.user.createdAt).toLocaleDateString()}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥:</span>
                                    <span>${POLAR_SYSTEM.user.refCode}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="game-table">
                            <h3 style="margin-bottom: 20px;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                            <div style="display: grid; gap: 15px;">
                                <div style="display: flex; justify-content: space-between;">
                                    <span>–í—Å–µ–≥–æ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ:</span>
                                    <span>${POLAR_SYSTEM.user.totalWagered.toFixed(2)} TON</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>–í—Å–µ–≥–æ –≤—ã–∏–≥—Ä–∞–Ω–æ:</span>
                                    <span style="color: var(--success);">${POLAR_SYSTEM.user.totalWon.toFixed(2)} TON</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>–ü—Ä–æ—Ü–µ–Ω—Ç –≤–æ–∑–≤—Ä–∞—Ç–∞:</span>
                                    <span>${POLAR_SYSTEM.user.totalWagered > 0 ? 
                                          ((POLAR_SYSTEM.user.totalWon / POLAR_SYSTEM.user.totalWagered) * 100).toFixed(2) : 0}%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="game-table">
                        <h3 style="margin-bottom: 20px;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                        <div style="display: grid; gap: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span>–ó–≤—É–∫–∏:</span>
                                <label class="switch">
                                    <input type="checkbox" ${POLAR_SYSTEM.settings.sound ? 'checked' : ''} 
                                           onchange="POLAR_SYSTEM.settings.sound = this.checked">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span>–ê–Ω–∏–º–∞—Ü–∏–∏:</span>
                                <label class="switch">
                                    <input type="checkbox" ${POLAR_SYSTEM.settings.animations ? 'checked' : ''} 
                                           onchange="POLAR_SYSTEM.settings.animations = this.checked">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function loadTransactions() {
            const tbody = document.getElementById('transactionsBody');
            tbody.innerHTML = '';
            
            POLAR_SYSTEM.transactions.forEach(transaction => {
                const row = document.createElement('tr');
                row.style.borderBottom = '1px solid var(--border-color)';
                
                const typeColors = {
                    deposit: '#00c853',
                    withdraw: '#ff9800',
                    win: '#4caf50',
                    bet: '#f44336',
                    bonus: '#9c27b0'
                };
                
                row.innerHTML = `
                    <td style="padding: 15px;">${new Date(transaction.timestamp).toLocaleString()}</td>
                    <td style="padding: 15px;">
                        <span style="color: ${typeColors[transaction.type] || '#ffffff'}">
                            ${transaction.type === 'deposit' ? '–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ' : 
                              transaction.type === 'withdraw' ? '–í—ã–≤–æ–¥' : 
                              transaction.type === 'win' ? '–í—ã–∏–≥—Ä—ã—à' : 
                              transaction.type === 'bet' ? '–°—Ç–∞–≤–∫–∞' : '–ë–æ–Ω—É—Å'}
                        </span>
                    </td>
                    <td style="padding: 15px; color: ${transaction.amount > 0 ? '#00c853' : '#f44336'};">
                        ${transaction.amount > 0 ? '+' : ''}${transaction.amount.toFixed(2)} TON
                    </td>
                    <td style="padding: 15px;">
                        <span style="color: ${transaction.status === 'completed' ? '#00c853' : 
                                         transaction.status === 'pending' ? '#ff9800' : '#f44336'}">
                            ${transaction.status === 'completed' ? '–ó–∞–≤–µ—Ä—à–µ–Ω–æ' : 
                             transaction.status === 'pending' ? '–í –æ–±—Ä–∞–±–æ—Ç–∫–µ' : '–û—à–∏–±–∫–∞'}
                        </span>
                    </td>
                    <td style="padding: 15px; font-family: monospace; font-size: 12px; color: var(--text-secondary);">
                        ${transaction.hash.substring(0, 12)}...
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–¢–†–ê–ù–ò–¶–´ =====
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage
            const savedTransactions = localStorage.getItem('polar_transactions');
            if (savedTransactions) {
                POLAR_SYSTEM.transactions = JSON.parse(savedTransactions);
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
            authSystem.initAuth();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –º–æ–¥–∞–ª–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
            const authTitle = document.getElementById('authTitle');
            const authForm = document.getElementById('authForm');
            const switchAuth = document.getElementById('switchAuth');
            const submitAuth = document.getElementById('submitAuth');
            const regCodeGroup = document.getElementById('regCodeGroup');
            
            let isRegisterMode = false;
            
            switchAuth.addEventListener('click', function(e) {
                e.preventDefault();
                isRegisterMode = !isRegisterMode;
                
                if (isRegisterMode) {
                    authTitle.textContent = '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ POLAR Casino';
                    submitAuth.textContent = '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è';
                    switchAuth.textContent = '–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏';
                    regCodeGroup.style.display = 'block';
                } else {
                    authTitle.textContent = '–í—Ö–æ–¥ –≤ POLAR Casino';
                    submitAuth.textContent = '–í–æ–π—Ç–∏';
                    switchAuth.textContent = '–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç';
                    regCodeGroup.style.display = 'none';
                }
            });
            
            submitAuth.addEventListener('click', async function() {
                const email = document.getElementById('authEmail').value;
                const password = document.getElementById('authPassword').value;
                const refCode = document.getElementById('regCode')?.value;
                
                if (!email || !password) {
                    showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                    return;
                }
                
                if (isRegisterMode) {
                    await authSystem.register(email, password, refCode);
                } else {
                    await authSystem.login(email, password);
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –º–æ–¥–∞–ª–∫–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
            const depositAmounts = document.querySelectorAll('.deposit-amount');
            const customAmount = document.getElementById('customAmount');
            const paymentMethods = document.querySelectorAll('.payment-method');
            const depositSum = document.getElementById('depositSum');
            const depositFee = document.getElementById('depositFee');
            const depositTotal = document.getElementById('depositTotal');
            const processDeposit = document.getElementById('processDeposit');
            
            let selectedAmount = 0;
            let selectedMethod = 'ton';
            
            depositAmounts.forEach(btn => {
                btn.addEventListener('click', function() {
                    depositAmounts.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    selectedAmount = parseFloat(this.dataset.amount);
                    customAmount.value = '';
                    updateDepositDetails();
                });
            });
            
            customAmount.addEventListener('input', function() {
                depositAmounts.forEach(b => b.classList.remove('active'));
                selectedAmount = parseFloat(this.value) || 0;
                updateDepositDetails();
            });
            
            paymentMethods.forEach(btn => {
                btn.addEventListener('click', function() {
                    paymentMethods.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    selectedMethod = this.dataset.method;
                    updateDepositDetails();
                });
            });
            
            function updateDepositDetails() {
                const methodData = POLAR_SYSTEM.depositMethods.find(m => m.id === selectedMethod);
                const fee = (selectedAmount * methodData.fee) / 100;
                const total = selectedAmount;
                
                depositSum.textContent = selectedAmount.toFixed(2) + ' TON';
                depositFee.textContent = fee.toFixed(2) + ' TON';
                depositTotal.textContent = total.toFixed(2) + ' TON';
            }
            
            processDeposit.addEventListener('click', async function() {
                if (selectedAmount <= 0) {
                    showNotification('–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è', 'error');
                    return;
                }
                
                await paymentSystem.processDeposit(selectedAmount, selectedMethod);
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∏–≥—Ä—ã –≤ —Å–ª–æ—Ç—ã
            const betButtons = document.querySelectorAll('.bet-btn');
            const spinButton = document.getElementById('spinButton');
            
            betButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    betButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    POLAR_SYSTEM.games.slots.currentBet = parseFloat(this.dataset.bet);
                    document.getElementById('currentBet').textContent = POLAR_SYSTEM.games.slots.currentBet;
                });
            });
            
            spinButton.addEventListener('click', function() {
                gameSystem.spinSlots();
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Ä—É–ª–µ—Ç–∫–∏
            const spinRoulette = document.getElementById('spinRoulette');
            if (spinRoulette) {
                spinRoulette.addEventListener('click', function() {
                    gameSystem.spinRoulette();
                });
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            if (POLAR_SYSTEM.user.isAuthenticated) {
                loadMainInterface();
            } else {
                showWelcomeScreen();
            }
            
            // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram WebApp
            if (window.Telegram && window.Telegram.WebApp) {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
                Telegram.WebApp.setHeaderColor('#0a0e17');
                Telegram.WebApp.setBackgroundColor('#0a0e17');
                Telegram.WebApp.MainButton.setText('–ù–∞—á–∞—Ç—å –∏–≥—Ä—É').show();
                
                Telegram.WebApp.MainButton.onClick(() => {
                    if (!POLAR_SYSTEM.user.isAuthenticated) {
                        openModal('authModal');
                    } else {
                        loadMainInterface();
                    }
                });
            }
        });

        // ===== –°–¢–ò–õ–ò –î–õ–Ø –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–ï–ô =====
        const style = document.createElement('style');
        style.textContent = `
            .switch {
                position: relative;
                display: inline-block;
                width: 60px;
                height: 34px;
            }
            
            .switch input {
                opacity: 0;
                width: 0;
                height: 0;
            }
            
            .slider {
                position: absolute;
                cursor: pointer;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: var(--bg-tertiary);
                transition: .4s;
                border-radius: 34px;
            }
            
            .slider:before {
                position: absolute;
                content: "";
                height: 26px;
                width: 26px;
                left: 4px;
                bottom: 4px;
                background-color: white;
                transition: .4s;
                border-radius: 50%;
            }
            
            input:checked + .slider {
                background-color: var(--ton-blue);
            }
            
            input:checked + .slider:before {
                transform: translateX(26px);
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
